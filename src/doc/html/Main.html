<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Main</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption empty">&nbsp;</span><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>Pedro Miguel Meruge Ferreira &lt;a100709@alunos.uminho.pt&gt;;<br />: Ivan S&#233;rgio Rocha Ribeiro &lt;a100538@alunos.uminho.pt&gt;;</td></tr><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">Main</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Data e tipos principais</a></li><li><a href="#g:2">Fun&#231;&#245;es auxiliares</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>M&#243;dulo para a realiza&#231;&#227;o da Tarefa 5 do projeto de LI1 em 2021/22.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">type</span> <a href="#t:Estado">Estado</a> = (<a href="LI12122.html#t:Jogo" title="LI12122">Jogo</a>, Picture, <a href="Main.html#t:GameMode" title="Main">GameMode</a>)</li><li class="src short"><span class="keyword">data</span> <a href="#t:GameMode">GameMode</a><ul class="subs"><li>= <a href="#v:Menu">Menu</a> <a href="Main.html#t:MenuInfo" title="Main">MenuInfo</a></li><li>| <a href="#v:MapSelector">MapSelector</a> <a href="Main.html#t:MapSelectInfo" title="Main">MapSelectInfo</a></li><li>| <a href="#v:Play">Play</a> <a href="Main.html#t:PlayInfo" title="Main">PlayInfo</a></li><li>| <a href="#v:MapEdit">MapEdit</a> <a href="Main.html#t:MapEditInfo" title="Main">MapEditInfo</a></li><li>| <a href="#v:Won">Won</a> <a href="Main.html#t:WonInfo" title="Main">WonInfo</a></li><li>| <a href="#v:TabMenu">TabMenu</a> <a href="Main.html#t:TabMenuInfo" title="Main">TabMenuInfo</a></li><li>| <a href="#v:Solver">Solver</a> <a href="Main.html#t:SolverInfo" title="Main">SolverInfo</a></li><li>| <a href="#v:SaveLoadPlay">SaveLoadPlay</a> <a href="Main.html#t:SLPlayInfo" title="Main">SLPlayInfo</a></li><li>| <a href="#v:SaveLoadEditor">SaveLoadEditor</a> <a href="Main.html#t:SLEditorInfo" title="Main">SLEditorInfo</a></li></ul></li><li class="src short"><span class="keyword">type</span> <a href="#t:WonInfo">WonInfo</a> = (Int, Float)</li><li class="src short"><span class="keyword">type</span> <a href="#t:PlayInfo">PlayInfo</a> = (Int, Float, Int)</li><li class="src short"><span class="keyword">type</span> <a href="#t:MenuInfo">MenuInfo</a> = ([(Int, Int, <a href="Main.html#t:MenuStates" title="Main">MenuStates</a>)], <a href="Main.html#t:MenuStates" title="Main">MenuStates</a>)</li><li class="src short"><span class="keyword">data</span> <a href="#t:MenuStates">MenuStates</a><ul class="subs"><li>= <a href="#v:New">New</a></li><li>| <a href="#v:Continue">Continue</a></li><li>| <a href="#v:LevelSelector">LevelSelector</a></li><li>| <a href="#v:MapEdit1">MapEdit1</a></li><li>| <a href="#v:Normal">Normal</a></li></ul></li><li class="src short"><span class="keyword">type</span> <a href="#t:MapSelectInfo">MapSelectInfo</a> = ([(Int, Int, Int)], Int)</li><li class="src short"><span class="keyword">type</span> <a href="#t:MapEditInfo">MapEditInfo</a> = ((Int, Int), (Int, Int), <a href="LI12122.html#t:Peca" title="LI12122">Peca</a>, (Int, Int, Int, Int, Int), Int, Float, Int)</li><li class="src short"><span class="keyword">type</span> <a href="#t:TabMenuInfo">TabMenuInfo</a> = (Int, <a href="Main.html#t:Estado" title="Main">Estado</a>)</li><li class="src short"><span class="keyword">type</span> <a href="#t:SolverInfo">SolverInfo</a> = ((<a href="Main.html#t:Estado" title="Main">Estado</a>, Maybe [<a href="LI12122.html#t:Movimento" title="LI12122">Movimento</a>], Maybe [<a href="LI12122.html#t:Movimento" title="LI12122">Movimento</a>], Int, Float), Int)</li><li class="src short"><span class="keyword">type</span> <a href="#t:SLPlayInfo">SLPlayInfo</a> = ((Int, Int), (<a href="LI12122.html#t:Jogo" title="LI12122">Jogo</a>, <a href="Main.html#t:PlayInfo" title="Main">PlayInfo</a>))</li><li class="src short"><span class="keyword">type</span> <a href="#t:SLEditorInfo">SLEditorInfo</a> = ((Int, Int), (<a href="LI12122.html#t:Jogo" title="LI12122">Jogo</a>, <a href="Main.html#t:MapEditInfo" title="Main">MapEditInfo</a>))</li><li class="src short"><a href="#v:jogos">jogos</a> :: [<a href="LI12122.html#t:Jogo" title="LI12122">Jogo</a>]</li><li class="src short"><a href="#v:infoMenu">infoMenu</a> :: ([(Int, Int, <a href="Main.html#t:MenuStates" title="Main">MenuStates</a>)], <a href="Main.html#t:MenuStates" title="Main">MenuStates</a>)</li><li class="src short"><a href="#v:infoMapSelect">infoMapSelect</a> :: <a href="Main.html#t:MapSelectInfo" title="Main">MapSelectInfo</a></li><li class="src short"><a href="#v:numeroMapas">numeroMapas</a> :: Int</li><li class="src short"><a href="#v:window">window</a> :: Display</li><li class="src short"><a href="#v:fr">fr</a> :: Int</li><li class="src short"><a href="#v:estadoBase">estadoBase</a> :: Picture -&gt; <a href="Main.html#t:GameMode" title="Main">GameMode</a> -&gt; <a href="Main.html#t:Estado" title="Main">Estado</a></li><li class="src short"><a href="#v:appendSaveGame">appendSaveGame</a> :: String -&gt; String -&gt; IO ()</li><li class="src short"><a href="#v:saveGame">saveGame</a> :: String -&gt; String -&gt; Int -&gt; IO ()</li><li class="src short"><a href="#v:loadGameEditor">loadGameEditor</a> :: Int -&gt; IO (<a href="LI12122.html#t:Jogo" title="LI12122">Jogo</a>, <a href="Main.html#t:MapEditInfo" title="Main">MapEditInfo</a>)</li><li class="src short"><a href="#v:loadGamePlay">loadGamePlay</a> :: Int -&gt; IO (<a href="LI12122.html#t:Jogo" title="LI12122">Jogo</a>, <a href="Main.html#t:PlayInfo" title="Main">PlayInfo</a>)</li><li class="src short"><a href="#v:compressMapa">compressMapa</a> :: [(<a href="LI12122.html#t:Peca" title="LI12122">Peca</a>, (Int, Int))] -&gt; [(<a href="LI12122.html#t:Peca" title="LI12122">Peca</a>, [(Int, Int)])]</li><li class="src short"><a href="#v:decompressMapa">decompressMapa</a> :: [(<a href="LI12122.html#t:Peca" title="LI12122">Peca</a>, [(Int, Int)])] -&gt; [(<a href="LI12122.html#t:Peca" title="LI12122">Peca</a>, (Int, Int))]</li><li class="src short"><a href="#v:makeMap">makeMap</a> :: [(<a href="LI12122.html#t:Peca" title="LI12122">Peca</a>, [(Int, Int)])] -&gt; <a href="LI12122.html#t:Mapa" title="LI12122">Mapa</a></li><li class="src short"><a href="#v:adicionaMapa">adicionaMapa</a> :: (Int, Int) -&gt; <a href="LI12122.html#t:Peca" title="LI12122">Peca</a> -&gt; <a href="LI12122.html#t:Mapa" title="LI12122">Mapa</a> -&gt; <a href="LI12122.html#t:Mapa" title="LI12122">Mapa</a></li><li class="src short"><a href="#v:deleteMapa">deleteMapa</a> :: (Int, Int) -&gt; <a href="LI12122.html#t:Mapa" title="LI12122">Mapa</a> -&gt; <a href="LI12122.html#t:Mapa" title="LI12122">Mapa</a></li><li class="src short"><a href="#v:getPictures">getPictures</a> :: [Picture] -&gt; (Float, Float, Float) -&gt; <a href="LI12122.html#t:Mapa" title="LI12122">Mapa</a> -&gt; [Picture]</li><li class="src short"><a href="#v:convert1">convert1</a> :: (Int, Int) -&gt; [(Int, Int, <a href="Main.html#t:MenuStates" title="Main">MenuStates</a>)] -&gt; <a href="Main.html#t:MenuStates" title="Main">MenuStates</a></li><li class="src short"><a href="#v:convert2">convert2</a> :: (Int, Int) -&gt; [(Int, Int, Int)] -&gt; Int</li><li class="src short"><a href="#v:drawscreen">drawscreen</a> :: Picture -&gt; <a href="LI12122.html#t:Jogo" title="LI12122">Jogo</a> -&gt; Int -&gt; Int -&gt; IO Picture</li><li class="src short"><a href="#v:loadpointers">loadpointers</a> :: Picture -&gt; Int -&gt; Int -&gt; Picture</li><li class="src short"><a href="#v:draw">draw</a> :: <a href="Main.html#t:Estado" title="Main">Estado</a> -&gt; IO Picture</li><li class="src short"><a href="#v:eventListener">eventListener</a> :: Event -&gt; <a href="Main.html#t:Estado" title="Main">Estado</a> -&gt; IO <a href="Main.html#t:Estado" title="Main">Estado</a></li><li class="src short"><a href="#v:step">step</a> :: Float -&gt; <a href="Main.html#t:Estado" title="Main">Estado</a> -&gt; IO <a href="Main.html#t:Estado" title="Main">Estado</a></li><li class="src short"><a href="#v:main">main</a> :: IO ()</li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Data e tipos principais</h1></a><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Estado" class="def">Estado</a> = (<a href="LI12122.html#t:Jogo" title="LI12122">Jogo</a>, Picture, <a href="Main.html#t:GameMode" title="Main">GameMode</a>) <a href="#t:Estado" class="selflink">#</a></p><div class="doc"><p>Estado usado pelo gloss, contendo um jogo, imagens e um modo de jogo </p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:GameMode" class="def">GameMode</a> <a href="#t:GameMode" class="selflink">#</a></p><div class="doc"><p>Os diferentes modos de jogo com as suas respetivas informa&#231;&#245;es</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Menu" class="def">Menu</a> <a href="Main.html#t:MenuInfo" title="Main">MenuInfo</a></td><td class="doc"><p>Menu (o menu inicial onde o jogador pode ser controlado)</p></td></tr><tr><td class="src"><a id="v:MapSelector" class="def">MapSelector</a> <a href="Main.html#t:MapSelectInfo" title="Main">MapSelectInfo</a></td><td class="doc"><p>Seletor de mapas</p></td></tr><tr><td class="src"><a id="v:Play" class="def">Play</a> <a href="Main.html#t:PlayInfo" title="Main">PlayInfo</a></td><td class="doc"><p>O jogo propriamente dito</p></td></tr><tr><td class="src"><a id="v:MapEdit" class="def">MapEdit</a> <a href="Main.html#t:MapEditInfo" title="Main">MapEditInfo</a></td><td class="doc"><p>Editor de mapas</p></td></tr><tr><td class="src"><a id="v:Won" class="def">Won</a> <a href="Main.html#t:WonInfo" title="Main">WonInfo</a></td><td class="doc"><p>Situa&#231;&#227;o em que venceu o jogo</p></td></tr><tr><td class="src"><a id="v:TabMenu" class="def">TabMenu</a> <a href="Main.html#t:TabMenuInfo" title="Main">TabMenuInfo</a></td><td class="doc"><p>Menu interativo</p></td></tr><tr><td class="src"><a id="v:Solver" class="def">Solver</a> <a href="Main.html#t:SolverInfo" title="Main">SolverInfo</a></td><td class="doc"><p>Resolvedor do jogo</p></td></tr><tr><td class="src"><a id="v:SaveLoadPlay" class="def">SaveLoadPlay</a> <a href="Main.html#t:SLPlayInfo" title="Main">SLPlayInfo</a></td><td class="doc"><p>Menu para carregar e continuar jogos do Play</p></td></tr><tr><td class="src"><a id="v:SaveLoadEditor" class="def">SaveLoadEditor</a> <a href="Main.html#t:SLEditorInfo" title="Main">SLEditorInfo</a></td><td class="doc"><p>Menu para carregar e continuar jogos do Editor</p></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:GameMode">Instances</h4><details id="i:GameMode" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:GameMode:Eq:1"></span> Eq <a href="Main.html#t:GameMode" title="Main">GameMode</a></span> <a href="#t:GameMode" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:GameMode:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Main.html">Main</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Main.html#t:GameMode" title="Main">GameMode</a> -&gt; <a href="Main.html#t:GameMode" title="Main">GameMode</a> -&gt; Bool</p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Main.html#t:GameMode" title="Main">GameMode</a> -&gt; <a href="Main.html#t:GameMode" title="Main">GameMode</a> -&gt; Bool</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:GameMode:Show:2"></span> Show <a href="Main.html#t:GameMode" title="Main">GameMode</a></span> <a href="#t:GameMode" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:GameMode:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Main.html">Main</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: Int -&gt; <a href="Main.html#t:GameMode" title="Main">GameMode</a> -&gt; ShowS</p><p class="src"><a href="#v:show">show</a> :: <a href="Main.html#t:GameMode" title="Main">GameMode</a> -&gt; String</p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Main.html#t:GameMode" title="Main">GameMode</a>] -&gt; ShowS</p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:WonInfo" class="def">WonInfo</a> = (Int, Float) <a href="#t:WonInfo" class="selflink">#</a></p><div class="doc"><p>(n&#250;mero de movimentos, tempo em segundos)</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:PlayInfo" class="def">PlayInfo</a> = (Int, Float, Int) <a href="#t:PlayInfo" class="selflink">#</a></p><div class="doc"><p>(n&#250;mero do mapa, tempo em segundos, n&#250;mero de movimentos)</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:MenuInfo" class="def">MenuInfo</a> = ([(Int, Int, <a href="Main.html#t:MenuStates" title="Main">MenuStates</a>)], <a href="Main.html#t:MenuStates" title="Main">MenuStates</a>) <a href="#t:MenuInfo" class="selflink">#</a></p><div class="doc"><p>(lista com as coordenadas das portas no menu e os respetivos modos de jogo, modo de jogo &#224; parte)</p><p>O &#250;ltimo valor permite distinguir se:</p><ul><li>O jogador est&#225; em cima de uma porta</li><li>O jogador est&#225; em qualquer outro lugar no menu.</li></ul><p>Assim, &#233; poss&#237;vel:</p><ul><li>criar o texto que aparece em cima de cada uma das portas, referente ao modo de jogo a que correspondem.</li><li>pressionar o <a href="Enter.html">Enter</a> para entrar no modo de jogo, ou usar teclas de movimento par deslocar-se para outra porta. </li></ul></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:MenuStates" class="def">MenuStates</a> <a href="#t:MenuStates" class="selflink">#</a></p><div class="doc"><p>Indica a porta em que o jogador est&#225; atualmente, no menu.</p><p>Com isto presente no estado, a fun&#231;&#227;o <code><a href="Main.html#v:step" title="Main">step</a></code> seria a &#250;nica respons&#225;vel por determinar se o jogador estava numa porta do menu e em qual, de modo que as outras fun&#231;&#245;es usam essa informa&#231;&#227;o.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:New" class="def">New</a></td><td class="doc"><p>Novo jogo</p></td></tr><tr><td class="src"><a id="v:Continue" class="def">Continue</a></td><td class="doc"><p>Continuar jogo</p></td></tr><tr><td class="src"><a id="v:LevelSelector" class="def">LevelSelector</a></td><td class="doc"><p>Seletor de n&#237;veis</p></td></tr><tr><td class="src"><a id="v:MapEdit1" class="def">MapEdit1</a></td><td class="doc"><p>Editor de mapas (o 1 no nome &#233; devido a MapEdit j&#225; existir)</p></td></tr><tr><td class="src"><a id="v:Normal" class="def">Normal</a></td><td class="doc"><p>Nenhuma porta</p></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:MenuStates">Instances</h4><details id="i:MenuStates" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:MenuStates:Eq:1"></span> Eq <a href="Main.html#t:MenuStates" title="Main">MenuStates</a></span> <a href="#t:MenuStates" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:MenuStates:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Main.html">Main</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Main.html#t:MenuStates" title="Main">MenuStates</a> -&gt; <a href="Main.html#t:MenuStates" title="Main">MenuStates</a> -&gt; Bool</p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Main.html#t:MenuStates" title="Main">MenuStates</a> -&gt; <a href="Main.html#t:MenuStates" title="Main">MenuStates</a> -&gt; Bool</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:MenuStates:Show:2"></span> Show <a href="Main.html#t:MenuStates" title="Main">MenuStates</a></span> <a href="#t:MenuStates" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:MenuStates:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Main.html">Main</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: Int -&gt; <a href="Main.html#t:MenuStates" title="Main">MenuStates</a> -&gt; ShowS</p><p class="src"><a href="#v:show">show</a> :: <a href="Main.html#t:MenuStates" title="Main">MenuStates</a> -&gt; String</p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Main.html#t:MenuStates" title="Main">MenuStates</a>] -&gt; ShowS</p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:MapSelectInfo" class="def">MapSelectInfo</a> = ([(Int, Int, Int)], Int) <a href="#t:MapSelectInfo" class="selflink">#</a></p><div class="doc"><p>(lista com as coordenadas de portas e n&#186; dos n&#237;veis correspondentes, valor &#224; parte)</p><p>De modo id&#234;ntico ao tipo <code><a href="Main.html#t:MenuInfo" title="Main">MenuInfo</a></code>, o &#250;ltimo valor permite coordenar a posi&#231;&#227;o em que o jogador est&#225; atualmente. </p><p>&#201; atualizado pela fun&#231;&#227;o <code><a href="Main.html#v:step" title="Main">step</a></code>, para ser usada nas outras fun&#231;&#245;es.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:MapEditInfo" class="def">MapEditInfo</a> = ((Int, Int), (Int, Int), <a href="LI12122.html#t:Peca" title="LI12122">Peca</a>, (Int, Int, Int, Int, Int), Int, Float, Int) <a href="#t:MapEditInfo" class="selflink">#</a></p><div class="doc"><p>(coordenadas da c&#226;mera, coordenadas do cursor, Peca selecionada, informa&#231;&#245;es para ajudar no movimento cont&#237;nuo, n&#250;mero que representa o modo, tempo em segundos, n&#250;mero do mapa)</p><p>As informa&#231;&#245;es sobre o movimento cont&#237;nuo representam (mover c&#226;mera verticalmente, mover c&#226;mera horizontalmente, mover cursor verticalmente, mover cursor horizontalmente, adicionar pe&#231;a | tirar pe&#231;a | ctrl est&#225; a ser pressionado)</p><p>Estas permitem guardar um valor que indica que uma tecla est&#225; a ser segurada</p><p>Os modos podem ser 0:normal | 1:validar o mapa | 2:zoom | 3:jogar o mapa</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:TabMenuInfo" class="def">TabMenuInfo</a> = (Int, <a href="Main.html#t:Estado" title="Main">Estado</a>) <a href="#t:TabMenuInfo" class="selflink">#</a></p><div class="doc"><p>(posi&#231;&#227;o atual no menu, estado do jogo antes de entrar no menu interativo)</p><p>O primeiro valor permite alternar entre as v&#225;rias op&#231;&#245;es que surgem no menu interativo, a contar de cima para baixo. Atualizado pela fun&#231;&#227;o <code><a href="Main.html#v:eventListener" title="Main">eventListener</a></code>.</p><p>O segundo valor permite guardar o estado antes de entrar no <code><a href="Main.html#v:TabMenu" title="Main">TabMenu</a></code> e recuper&#225;-lo quando sair do <code><a href="Main.html#v:TabMenu" title="Main">TabMenu</a></code></p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:SolverInfo" class="def">SolverInfo</a> = ((<a href="Main.html#t:Estado" title="Main">Estado</a>, Maybe [<a href="LI12122.html#t:Movimento" title="LI12122">Movimento</a>], Maybe [<a href="LI12122.html#t:Movimento" title="LI12122">Movimento</a>], Int, Float), Int) <a href="#t:SolverInfo" class="selflink">#</a></p><div class="doc"><p>Os diferentes valores correspondem a:</p><ul><li>estado do menu interativo (antes de selecionar a op&#231;&#227;o <code><a href="Main.html#v:Solver" title="Main">Solver</a></code>);</li><li>lista de movimentos obtida de <code><a href="Tarefa6_2021li1g025.html#v:resolveJogo" title="Tarefa6_2021li1g025">resolveJogo</a></code>;</li><li>lista para onde v&#227;o os movimentos j&#225; efetuados (caso o jogador queria repetir a solu&#231;&#227;o);</li><li>n&#250;mero que regista a op&#231;&#227;o de come&#231;ar a solu&#231;&#227;o do in&#237;cio ou do lugar atual; </li><li>tempo decorrido (para espa&#231;ar os movimentos da solu&#231;&#227;o);</li><li>n&#250;mero que distingue o menu em que se pergunta onde deve come&#231;ar a solu&#231;&#227;o e a pr&#243;pria anima&#231;&#227;o da solu&#231;&#227;o ;</li></ul></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:SLPlayInfo" class="def">SLPlayInfo</a> = ((Int, Int), (<a href="LI12122.html#t:Jogo" title="LI12122">Jogo</a>, <a href="Main.html#t:PlayInfo" title="Main">PlayInfo</a>)) <a href="#t:SLPlayInfo" class="selflink">#</a></p><div class="doc"><p>(primeiro Int: 1 -&gt; load, 2-&gt; save, segundo Int: n&#250;mero do savefile, terceiro Int: dados importados do &quot;SaveGamePlay.txt&quot;)</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:SLEditorInfo" class="def">SLEditorInfo</a> = ((Int, Int), (<a href="LI12122.html#t:Jogo" title="LI12122">Jogo</a>, <a href="Main.html#t:MapEditInfo" title="Main">MapEditInfo</a>)) <a href="#t:SLEditorInfo" class="selflink">#</a></p><div class="doc"><p>(primeiro Int: 1 -&gt; load, 2-&gt; save, segundo Int: n&#250;mero do savefile, terceiro Int: dados importados do &quot;SaveGameEditor.txt&quot;)</p></div></div><div class="top"><p class="src"><a id="v:jogos" class="def">jogos</a> :: [<a href="LI12122.html#t:Jogo" title="LI12122">Jogo</a>] <a href="#v:jogos" class="selflink">#</a></p><div class="doc"><p>Lista de jogos de cada mapa</p></div></div><div class="top"><p class="src"><a id="v:infoMenu" class="def">infoMenu</a> :: ([(Int, Int, <a href="Main.html#t:MenuStates" title="Main">MenuStates</a>)], <a href="Main.html#t:MenuStates" title="Main">MenuStates</a>) <a href="#v:infoMenu" class="selflink">#</a></p><div class="doc"><p>Lista com as portas e os modos de jogo correspondentes no menu.</p></div></div><div class="top"><p class="src"><a id="v:infoMapSelect" class="def">infoMapSelect</a> :: <a href="Main.html#t:MapSelectInfo" title="Main">MapSelectInfo</a> <a href="#v:infoMapSelect" class="selflink">#</a></p><div class="doc"><p>Lista com as portas e os n&#237;veis correspondentes no seletor de mapas</p></div></div><div class="top"><p class="src"><a id="v:numeroMapas" class="def">numeroMapas</a> :: Int <a href="#v:numeroMapas" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:window" class="def">window</a> :: Display <a href="#v:window" class="selflink">#</a></p><div class="doc"><p>converte o jogo para a resolu&#231;&#227;o fullscreen</p></div></div><div class="top"><p class="src"><a id="v:fr" class="def">fr</a> :: Int <a href="#v:fr" class="selflink">#</a></p></div><a href="#g:2" id="g:2"><h1>Fun&#231;&#245;es auxiliares</h1></a><div class="top"><p class="src"><a id="v:estadoBase" class="def">estadoBase</a> <a href="#v:estadoBase" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Picture</td><td class="doc"><p>Imagens</p></td></tr><tr><td class="src">-&gt; <a href="Main.html#t:GameMode" title="Main">GameMode</a></td><td class="doc"><p>O gamemode que se pretende obter</p></td></tr><tr><td class="src">-&gt; <a href="Main.html#t:Estado" title="Main">Estado</a></td><td class="doc"><p>Estado coreresponente</p></td></tr></table></div><div class="doc"><p>Dadas as imagens e um Gamemode, devolve o seu estado base</p><p>Por exemplo, para Play (1,...), sendo 1 o n&#250;mero do mapa, ir&#225; devolver um estado inicial com esse Mapa, mas com os segundos e movimentos zerados</p></div></div><div class="top"><p class="src"><a id="v:appendSaveGame" class="def">appendSaveGame</a> <a href="#v:appendSaveGame" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: String</td><td class="doc"><p>nome do ficheiro</p></td></tr><tr><td class="src">-&gt; String</td><td class="doc"><p>string a gravar</p></td></tr><tr><td class="src">-&gt; IO ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Escreve uma string no final do ficheiro</p></div></div><div class="top"><p class="src"><a id="v:saveGame" class="def">saveGame</a> <a href="#v:saveGame" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: String</td><td class="doc"><p>nome do ficheiro</p></td></tr><tr><td class="src">-&gt; String</td><td class="doc"><p>string a gravar</p></td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>numero da linha a gravar</p></td></tr><tr><td class="src">-&gt; IO ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Escreve numa dada linha de um ficheiro (come&#231;ando na linha 0)</p><p>Se o ficheiro n&#227;o tiver as linhas necess&#225;rias ir&#225; ser preenchido com linhas vazias</p></div></div><div class="top"><p class="src"><a id="v:loadGameEditor" class="def">loadGameEditor</a> <a href="#v:loadGameEditor" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Int</td><td class="doc"><p>N&#250;mero da linha (n&#250;mero do mapa - 1)</p></td></tr><tr><td class="src">-&gt; IO (<a href="LI12122.html#t:Jogo" title="LI12122">Jogo</a>, <a href="Main.html#t:MapEditInfo" title="Main">MapEditInfo</a>)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Carrega um estado do editor de mapas</p></div></div><div class="top"><p class="src"><a id="v:loadGamePlay" class="def">loadGamePlay</a> <a href="#v:loadGamePlay" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Int</td><td class="doc"><p>N&#250;mero da linha (n&#250;mero do mapa - 1)</p></td></tr><tr><td class="src">-&gt; IO (<a href="LI12122.html#t:Jogo" title="LI12122">Jogo</a>, <a href="Main.html#t:PlayInfo" title="Main">PlayInfo</a>)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Carrega um estado do jogo propriamente dito</p></div></div><div class="top"><p class="src"><a id="v:compressMapa" class="def">compressMapa</a> :: [(<a href="LI12122.html#t:Peca" title="LI12122">Peca</a>, (Int, Int))] -&gt; [(<a href="LI12122.html#t:Peca" title="LI12122">Peca</a>, [(Int, Int)])] <a href="#v:compressMapa" class="selflink">#</a></p><div class="doc"><p>Transforma a lista de pe&#231;as do mapa (j&#225; desconstru&#237;do) em listas da forma [(Peca,(lista das coordenadas em que ela ocorre))]</p></div></div><div class="top"><p class="src"><a id="v:decompressMapa" class="def">decompressMapa</a> :: [(<a href="LI12122.html#t:Peca" title="LI12122">Peca</a>, [(Int, Int)])] -&gt; [(<a href="LI12122.html#t:Peca" title="LI12122">Peca</a>, (Int, Int))] <a href="#v:decompressMapa" class="selflink">#</a></p><div class="doc"><p>Transforma o mapa comprimido num mapa desconstru&#237;do</p></div></div><div class="top"><p class="src"><a id="v:makeMap" class="def">makeMap</a> :: [(<a href="LI12122.html#t:Peca" title="LI12122">Peca</a>, [(Int, Int)])] -&gt; <a href="LI12122.html#t:Mapa" title="LI12122">Mapa</a> <a href="#v:makeMap" class="selflink">#</a></p><div class="doc"><p>Simultaneamente faz a decompress&#227;o e a constru&#231;&#227;o de um mapa na sua forma comprimida</p></div></div><div class="top"><p class="src"><a id="v:adicionaMapa" class="def">adicionaMapa</a> <a href="#v:adicionaMapa" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: (Int, Int)</td><td class="doc"><p>Coordenadas da pe&#231;a</p></td></tr><tr><td class="src">-&gt; <a href="LI12122.html#t:Peca" title="LI12122">Peca</a></td><td class="doc"><p>Pe&#231;a a colocar</p></td></tr><tr><td class="src">-&gt; <a href="LI12122.html#t:Mapa" title="LI12122">Mapa</a></td><td class="doc"><p>Mapa original</p></td></tr><tr><td class="src">-&gt; <a href="LI12122.html#t:Mapa" title="LI12122">Mapa</a></td><td class="doc"><p>Mapa resultante</p></td></tr></table></div><div class="doc"><p>Adiciona uma pe&#231;a em dadas coordenadas a um mapa</p></div></div><div class="top"><p class="src"><a id="v:deleteMapa" class="def">deleteMapa</a> <a href="#v:deleteMapa" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: (Int, Int)</td><td class="doc"><p>Coordenadas da pe&#231;a a apagar</p></td></tr><tr><td class="src">-&gt; <a href="LI12122.html#t:Mapa" title="LI12122">Mapa</a></td><td class="doc"><p>Mapa original</p></td></tr><tr><td class="src">-&gt; <a href="LI12122.html#t:Mapa" title="LI12122">Mapa</a></td><td class="doc"><p>Mapa resultante</p></td></tr></table></div><div class="doc"><p>Apaga qualquer pe&#231;a de um mapa dadas as coordenadas</p></div></div><div class="top"><p class="src"><a id="v:getPictures" class="def">getPictures</a> <a href="#v:getPictures" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: [Picture]</td><td class="doc"><p>Imagens a ser utilizadas (bloco, caixa, porta)</p></td></tr><tr><td class="src">-&gt; (Float, Float, Float)</td><td class="doc"><p>Offsets (horizontal, acumulador do horizontal, vertical)</p></td></tr><tr><td class="src">-&gt; <a href="LI12122.html#t:Mapa" title="LI12122">Mapa</a></td><td class="doc"><p>O mapa a desenhar </p></td></tr><tr><td class="src">-&gt; [Picture]</td><td class="doc"><p>O mapa transformado em imagens</p></td></tr></table></div><div class="doc"><p>Transforma o mapa dado numa lista de imagens</p><p>Esta come&#231;a a desenhar as pe&#231;as aplicando-lhes uma transla&#231;&#227;o Translate (offset x) (offset y), de seguida somando ao acumulador 64 (comprimento da pe&#231;a) e repetindo o processo para a pr&#243;xima pe&#231;a, que agora ser&#225; desenhada 64 p&#237;xeis &#224; direita</p><p>Ao chegar ao fim de uma linha, &#233; subtra&#237;do 64 ao offset vertical e o acumulador &#233; reiniciado</p><p>Assim, as pe&#231;as s&#227;o desenhadas da esquerda para a direita at&#233; ao fim da linha, e de seguida de cima para baixo</p><p>O valor inicial do acumulador deve ser o mesmo do que o do offset horizontal</p></div></div><div class="top"><p class="src"><a id="v:convert1" class="def">convert1</a> <a href="#v:convert1" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: (Int, Int)</td><td class="doc"><p>posi&#231;&#227;o atual do jogador</p></td></tr><tr><td class="src">-&gt; [(Int, Int, <a href="Main.html#t:MenuStates" title="Main">MenuStates</a>)]</td><td class="doc"><p>lista das portas do menu e respetivos modos de jogos</p></td></tr><tr><td class="src">-&gt; <a href="Main.html#t:MenuStates" title="Main">MenuStates</a></td><td class="doc"><p>mode de jogo final</p></td></tr></table></div><div class="doc"><p>Percorre a lista das portas do menu e verifica correspond&#234;ncias da posi&#231;&#227;o atual do jogador com as portas.</p><p>Utilizada na fun&#231;&#227;o <code><a href="Main.html#v:step" title="Main">step</a></code> para mudar o valor de MenuStates no estado e </p><p>Deste modo as outras fun&#231;&#245;es compreendem onde o jogador se encontra no menu.</p></div></div><div class="top"><p class="src"><a id="v:convert2" class="def">convert2</a> <a href="#v:convert2" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: (Int, Int)</td><td class="doc"><p>posi&#231;&#227;o atual do jogador</p></td></tr><tr><td class="src">-&gt; [(Int, Int, Int)]</td><td class="doc"><p>lista das portas do seletor de mapas e respetivos modos de jogos</p></td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>mode de jogo final</p></td></tr></table></div><div class="doc"><p>Percorre a lista das portas do seletor de mapas e verifica correspond&#234;ncias da posi&#231;&#227;o atual do jogador com as portas.</p><p>Utilizada na fun&#231;&#227;o <code><a href="Main.html#v:step" title="Main">step</a></code> para mudar o valor de de um Int no estado. </p><p>Deste modo as outras fun&#231;&#245;es compreendem onde o jogador se encontra. </p><p>Id&#234;ntica &#224; fun&#231;&#227;o <code><a href="Main.html#v:convert1" title="Main">convert1</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:drawscreen" class="def">drawscreen</a> <a href="#v:drawscreen" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Picture</td><td class="doc"><p>Recebe uma lista de todas as pictures no ficheiro do projeto</p></td></tr><tr><td class="src">-&gt; <a href="LI12122.html#t:Jogo" title="LI12122">Jogo</a></td><td class="doc"><p>jogo para desenhar na janela de carregar ou guardar mapas</p></td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>indica a posi&#231;&#227;o atual nas janelas de SaveLoad</p></td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>indica o modo de jogo: 1 -&gt; Play, 2 -&gt; Editor</p></td></tr><tr><td class="src">-&gt; IO Picture</td><td class="doc"><p>desenho final</p></td></tr></table></div><div class="doc"><p>Fun&#231;&#227;o auxiliar do draw para SaveLoad do Play e Editor</p><p>Faz a interface gr&#225;fica do jogo quando se carregam ou guardam jogos.</p><p>Se n&#227;o houver jogo guardado numa dada janela, devolve um texto a dizer que est&#225; vazio. </p><p>Se houver, desenha numa janela pequena o jogo guardado</p></div></div><div class="top"><p class="src"><a id="v:loadpointers" class="def">loadpointers</a> <a href="#v:loadpointers" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Picture</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>posi&#231;&#227;o atual no menu SaveLoad do Play ou Editor</p></td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>modo de jogo (para saber o n&#186; da janela m&#225;xima)</p></td></tr><tr><td class="src">-&gt; Picture</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Fun&#231;&#227;o auxiliar do draw para SaveLoad do Play e Editor</p><p>Desenha a par da fun&#231;&#227;o <code><a href="Main.html#v:drawscreen" title="Main">drawscreen</a></code>, as setas nas janelas do SaveLoad, para orientar o jogador.</p></div></div><div class="top"><p class="src"><a id="v:draw" class="def">draw</a> :: <a href="Main.html#t:Estado" title="Main">Estado</a> -&gt; IO Picture <a href="#v:draw" class="selflink">#</a></p><div class="doc"><p>Converte o estado atual em imagens</p></div></div><div class="top"><p class="src"><a id="v:eventListener" class="def">eventListener</a> :: Event -&gt; <a href="Main.html#t:Estado" title="Main">Estado</a> -&gt; IO <a href="Main.html#t:Estado" title="Main">Estado</a> <a href="#v:eventListener" class="selflink">#</a></p><div class="doc"><p>Efetua uma a&#231;&#227;o consoante a tecla pressionada ou largada e o estado atual</p></div></div><div class="top"><p class="src"><a id="v:step" class="def">step</a> :: Float -&gt; <a href="Main.html#t:Estado" title="Main">Estado</a> -&gt; IO <a href="Main.html#t:Estado" title="Main">Estado</a> <a href="#v:step" class="selflink">#</a></p><div class="doc"><p>Fun&#231;&#227;o de update: </p><ul><li>permite guardar a passagem do tempo no Play (para o highscore) e Solver (para espa&#231;ar os movimentos da solu&#231;&#227;o)</li><li>permite atualizar os estados do jogo, de modo a orientar as outras fun&#231;&#245;es da posi&#231;&#227;o atual do jogador.
Isto &#233;:  </li><li>*atualiza o estado quando o jogador se coloca &#224; frente de uma porta no menu, seletor de mapas. </li><li>*atualiza o estado quando o jogador termina o n&#237;vel no Play, ou quando termina a solu&#231;&#227;o no Solver,...</li></ul></div></div><div class="top"><p class="src"><a id="v:main" class="def">main</a> :: IO () <a href="#v:main" class="selflink">#</a></p><div class="doc"><p>Fun&#231;&#227;o main, que carrega as imagens e inicia o jogo no estado inicial do menu</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.24.2</p></div></body></html>