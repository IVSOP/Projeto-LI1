<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Tarefa4_2021li1g025</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption empty">&nbsp;</p></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>Pedro Miguel Meruge Ferreira &lt;a100709@alunos.uminho.pt&gt;;<br />: Ivan S&#233;rgio Rocha Ribeiro &lt;a100538@alunos.uminho.pt&gt;;</td></tr><tr><th>Safe Haskell</th><td>Safe</td></tr></table><p class="caption">Tarefa4_2021li1g025</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Fun&#231;&#245;es Principais</a></li><li><a href="#g:2">Func&#231;&#245;es auxiliares</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>M&#243;dulo para a realiza&#231;&#227;o da Tarefa 4 do projeto de LI1 em 2021/22.</p><p>O mesmo mapa da Tarefa1 continua a ser usado para os exemplos.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:PontosCardeais">PontosCardeais</a><ul class="subs"><li>= <a href="#v:NO">NO</a></li><li>| <a href="#v:N">N</a></li><li>| <a href="#v:NE">NE</a></li><li>| <a href="#v:O">O</a></li><li>| <a href="#v:E">E</a></li><li>| <a href="#v:SO">SO</a></li><li>| <a href="#v:S">S</a></li><li>| <a href="#v:SE">SE</a></li></ul></li><li class="src short"><a href="#v:moveJogador">moveJogador</a> :: <a href="LI12122.html#t:Jogo" title="LI12122">Jogo</a> -&gt; <a href="LI12122.html#t:Movimento" title="LI12122">Movimento</a> -&gt; <a href="LI12122.html#t:Jogo" title="LI12122">Jogo</a></li><li class="src short"><a href="#v:correrMovimentos">correrMovimentos</a> :: <a href="LI12122.html#t:Jogo" title="LI12122">Jogo</a> -&gt; [<a href="LI12122.html#t:Movimento" title="LI12122">Movimento</a>] -&gt; <a href="LI12122.html#t:Jogo" title="LI12122">Jogo</a></li><li class="src short"><a href="#v:getpeca">getpeca</a> :: <a href="LI12122.html#t:Mapa" title="LI12122">Mapa</a> -&gt; <a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a> -&gt; <a href="LI12122.html#t:Peca" title="LI12122">Peca</a></li><li class="src short"><a href="#v:mapAround">mapAround</a> :: <a href="LI12122.html#t:Mapa" title="LI12122">Mapa</a> -&gt; <a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a> -&gt; [<a href="LI12122.html#t:Peca" title="LI12122">Peca</a>]</li><li class="src short"><a href="#v:isBlockorBox">isBlockorBox</a> :: <a href="Tarefa4_2021li1g025.html#t:PontosCardeais" title="Tarefa4_2021li1g025">PontosCardeais</a> -&gt; [<a href="LI12122.html#t:Peca" title="LI12122">Peca</a>] -&gt; Bool</li><li class="src short"><a href="#v:andar">andar</a> :: <a href="LI12122.html#t:Jogo" title="LI12122">Jogo</a> -&gt; <a href="LI12122.html#t:Movimento" title="LI12122">Movimento</a> -&gt; <a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a></li><li class="src short"><a href="#v:getNext">getNext</a> :: <a href="LI12122.html#t:Mapa" title="LI12122">Mapa</a> -&gt; <a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a> -&gt; <a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a></li><li class="src short"><a href="#v:trepar">trepar</a> :: <a href="LI12122.html#t:Jogo" title="LI12122">Jogo</a> -&gt; <a href="LI12122.html#t:Movimento" title="LI12122">Movimento</a> -&gt; <a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a></li><li class="src short"><a href="#v:treparsemCaixa">treparsemCaixa</a> :: <a href="LI12122.html#t:Jogo" title="LI12122">Jogo</a> -&gt; [<a href="LI12122.html#t:Peca" title="LI12122">Peca</a>] -&gt; <a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a></li><li class="src short"><a href="#v:treparcomCaixa">treparcomCaixa</a> :: <a href="LI12122.html#t:Jogo" title="LI12122">Jogo</a> -&gt; [<a href="LI12122.html#t:Peca" title="LI12122">Peca</a>] -&gt; [<a href="LI12122.html#t:Peca" title="LI12122">Peca</a>] -&gt; <a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a></li><li class="src short"><a href="#v:interagirCaixa">interagirCaixa</a> :: <a href="LI12122.html#t:Jogo" title="LI12122">Jogo</a> -&gt; <a href="LI12122.html#t:Movimento" title="LI12122">Movimento</a> -&gt; Bool</li><li class="src short"><a href="#v:pegarCaixa">pegarCaixa</a> :: <a href="LI12122.html#t:Jogo" title="LI12122">Jogo</a> -&gt; [<a href="LI12122.html#t:Peca" title="LI12122">Peca</a>] -&gt; Bool</li><li class="src short"><a href="#v:largarCaixa">largarCaixa</a> :: <a href="LI12122.html#t:Jogo" title="LI12122">Jogo</a> -&gt; <a href="LI12122.html#t:Jogo" title="LI12122">Jogo</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:PontosCardeais" class="def">PontosCardeais</a> <a href="#t:PontosCardeais" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:NO" class="def">NO</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:N" class="def">N</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:NE" class="def">NE</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:O" class="def">O</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:E" class="def">E</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:SO" class="def">SO</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:S" class="def">S</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:SE" class="def">SE</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><details id="i:PontosCardeais" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:PontosCardeais:Eq:1"></span> Eq <a href="Tarefa4_2021li1g025.html#t:PontosCardeais" title="Tarefa4_2021li1g025">PontosCardeais</a></span> <a href="#t:PontosCardeais" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:PontosCardeais:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Tarefa4_2021li1g025.html">Tarefa4_2021li1g025</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Tarefa4_2021li1g025.html#t:PontosCardeais" title="Tarefa4_2021li1g025">PontosCardeais</a> -&gt; <a href="Tarefa4_2021li1g025.html#t:PontosCardeais" title="Tarefa4_2021li1g025">PontosCardeais</a> -&gt; Bool</p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Tarefa4_2021li1g025.html#t:PontosCardeais" title="Tarefa4_2021li1g025">PontosCardeais</a> -&gt; <a href="Tarefa4_2021li1g025.html#t:PontosCardeais" title="Tarefa4_2021li1g025">PontosCardeais</a> -&gt; Bool</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:PontosCardeais:Read:2"></span> Read <a href="Tarefa4_2021li1g025.html#t:PontosCardeais" title="Tarefa4_2021li1g025">PontosCardeais</a></span> <a href="#t:PontosCardeais" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:PontosCardeais:Read:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Tarefa4_2021li1g025.html">Tarefa4_2021li1g025</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:readsPrec">readsPrec</a> :: Int -&gt; ReadS <a href="Tarefa4_2021li1g025.html#t:PontosCardeais" title="Tarefa4_2021li1g025">PontosCardeais</a></p><p class="src"><a href="#v:readList">readList</a> :: ReadS [<a href="Tarefa4_2021li1g025.html#t:PontosCardeais" title="Tarefa4_2021li1g025">PontosCardeais</a>]</p><p class="src"><a href="#v:readPrec">readPrec</a> :: ReadPrec <a href="Tarefa4_2021li1g025.html#t:PontosCardeais" title="Tarefa4_2021li1g025">PontosCardeais</a></p><p class="src"><a href="#v:readListPrec">readListPrec</a> :: ReadPrec [<a href="Tarefa4_2021li1g025.html#t:PontosCardeais" title="Tarefa4_2021li1g025">PontosCardeais</a>]</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:PontosCardeais:Show:3"></span> Show <a href="Tarefa4_2021li1g025.html#t:PontosCardeais" title="Tarefa4_2021li1g025">PontosCardeais</a></span> <a href="#t:PontosCardeais" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:PontosCardeais:Show:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Tarefa4_2021li1g025.html">Tarefa4_2021li1g025</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: Int -&gt; <a href="Tarefa4_2021li1g025.html#t:PontosCardeais" title="Tarefa4_2021li1g025">PontosCardeais</a> -&gt; ShowS</p><p class="src"><a href="#v:show">show</a> :: <a href="Tarefa4_2021li1g025.html#t:PontosCardeais" title="Tarefa4_2021li1g025">PontosCardeais</a> -&gt; String</p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Tarefa4_2021li1g025.html#t:PontosCardeais" title="Tarefa4_2021li1g025">PontosCardeais</a>] -&gt; ShowS</p></div></details></td></tr></table></details></div></div><a href="#g:1" id="g:1"><h1>Fun&#231;&#245;es Principais</h1></a><div class="top"><p class="src"><a id="v:moveJogador" class="def">moveJogador</a> :: <a href="LI12122.html#t:Jogo" title="LI12122">Jogo</a> -&gt; <a href="LI12122.html#t:Movimento" title="LI12122">Movimento</a> -&gt; <a href="LI12122.html#t:Jogo" title="LI12122">Jogo</a> <a href="#v:moveJogador" class="selflink">#</a></p><div class="doc"><p>Corre um &#250;nico movimento, devolvendo o jogo no estado ap&#243;s esse movimento</p></div></div><div class="top"><p class="src"><a id="v:correrMovimentos" class="def">correrMovimentos</a> :: <a href="LI12122.html#t:Jogo" title="LI12122">Jogo</a> -&gt; [<a href="LI12122.html#t:Movimento" title="LI12122">Movimento</a>] -&gt; <a href="LI12122.html#t:Jogo" title="LI12122">Jogo</a> <a href="#v:correrMovimentos" class="selflink">#</a></p><div class="doc"><p>Corre uma lista de movimentos, devolvendo o jogo no estado ap&#243;s esses movimentos</p></div></div><a href="#g:2" id="g:2"><h1>Func&#231;&#245;es auxiliares</h1></a><div class="top"><p class="src"><a id="v:getpeca" class="def">getpeca</a> :: <a href="LI12122.html#t:Mapa" title="LI12122">Mapa</a> -&gt; <a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a> -&gt; <a href="LI12122.html#t:Peca" title="LI12122">Peca</a> <a href="#v:getpeca" class="selflink">#</a></p><div class="doc"><p>Retorna as coordendas (x,y) de uma pe&#231;a do mapa</p></div></div><div class="top"><p class="src"><a id="v:mapAround" class="def">mapAround</a> :: <a href="LI12122.html#t:Mapa" title="LI12122">Mapa</a> -&gt; <a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a> -&gt; [<a href="LI12122.html#t:Peca" title="LI12122">Peca</a>] <a href="#v:mapAround" class="selflink">#</a></p><div class="doc"><p>Retorna as pe&#231;as que circundam o jogador (num raio 1) , pela ordem (NO,N,NE,O,E,SO,S,SE), segundo os pontos cardeais
 | Sup&#245;e-se que o jogador est&#225; sempre rodeado de pe&#231;as (de qualquer tipo)</p></div></div><div class="top"><p class="src"><a id="v:isBlockorBox" class="def">isBlockorBox</a> :: <a href="Tarefa4_2021li1g025.html#t:PontosCardeais" title="Tarefa4_2021li1g025">PontosCardeais</a> -&gt; [<a href="LI12122.html#t:Peca" title="LI12122">Peca</a>] -&gt; Bool <a href="#v:isBlockorBox" class="selflink">#</a></p><div class="doc"><p>Testa se um bloco numa posicao cardeal relativa ao jogador &#233; bloco ou caixa
 | A lista em que atua tem de vir da fun&#231;&#227;o &quot;mapAround&quot;</p></div></div><div class="top"><p class="src"><a id="v:andar" class="def">andar</a> :: <a href="LI12122.html#t:Jogo" title="LI12122">Jogo</a> -&gt; <a href="LI12122.html#t:Movimento" title="LI12122">Movimento</a> -&gt; <a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a> <a href="#v:andar" class="selflink">#</a></p><div class="doc"><p>Retorna as coordenadas resultantes de andar para a esquerda ou direita, com ou sem caixa</p><p>Assim, &#233; poss&#237;vel, por exemplo, cair v&#225;rios blocos de uma s&#243; vez ou n&#227;o sair do lugar se o movimento n&#227;o for poss&#237;vel</p><p>Neste exemplo temos Jogador (6,1) Este True
&gt;&gt;&gt; andar jogo AndarDireita
(7,5)</p></div></div><div class="top"><p class="src"><a id="v:getNext" class="def">getNext</a> :: <a href="LI12122.html#t:Mapa" title="LI12122">Mapa</a> -&gt; <a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a> -&gt; <a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a> <a href="#v:getNext" class="selflink">#</a></p><div class="doc"><p>Devolve as coordenadas bloco mais pr&#243;ximo abaixo de certas coordenadas, se existir</p><p>&#201; usada, por exemplo, para encontrar onde o jogador ir&#225; cair ap&#243;s andar num local sem &quot;ch&#227;o&quot; imediatamente &#224; sua frente</p><p>Como esta devolve as coordenadas do bloco ou caixa e n&#227;o o &#250;ltimo vazio, &#233; importante subtrair 1 ao y do resultado final ao utilizar esta fun&#231;&#227;o</p><p>Assume-se que o mapa ser&#225; aquele sem as linhas &quot;in&#250;teis&quot;, ou seja, apenas inclui as linhas diretamente abaixo do jogador</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>getNext mapa (7,2)
</code></strong>(7,8), o que estaria errado
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>getNext (drop 2 mapa) (7,2)
</code></strong>(7,6) o que est&#225; certo, ap&#243;s remover as linhas que n&#227;o interessam
</pre></div></div><div class="top"><p class="src"><a id="v:trepar" class="def">trepar</a> :: <a href="LI12122.html#t:Jogo" title="LI12122">Jogo</a> -&gt; <a href="LI12122.html#t:Movimento" title="LI12122">Movimento</a> -&gt; <a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a> <a href="#v:trepar" class="selflink">#</a></p><div class="doc"><p>Retorna as coordenadas resultantes de tentar trepar o obst&#225;culo imediatamente &#224; sua frente</p><p>Verifica inicialemnte se o jogador transporta uma caixa e redireciona os dados para auxiliares (&quot;treparsemCaixa&quot; e &quot;treparcomCaixa&quot;)</p></div></div><div class="top"><p class="src"><a id="v:treparsemCaixa" class="def">treparsemCaixa</a> :: <a href="LI12122.html#t:Jogo" title="LI12122">Jogo</a> -&gt; [<a href="LI12122.html#t:Peca" title="LI12122">Peca</a>] -&gt; <a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a> <a href="#v:treparsemCaixa" class="selflink">#</a></p><div class="doc"><p>Quando o jogador n&#227;o segura uma caixa, <code>treparsemCaixa</code> verifica se existe simultaneamente um bloco ou caixa em frente ao jogador e uma pe&#231;a vazio (ou porta) em cima-frente dele</p><p>Impede o jogador de trepar portas, pe&#231;as de vazio, obst&#225;culos com mais de um bloco de altura, entre outras ocorr&#234;ncias</p></div></div><div class="top"><p class="src"><a id="v:treparcomCaixa" class="def">treparcomCaixa</a> :: <a href="LI12122.html#t:Jogo" title="LI12122">Jogo</a> -&gt; [<a href="LI12122.html#t:Peca" title="LI12122">Peca</a>] -&gt; [<a href="LI12122.html#t:Peca" title="LI12122">Peca</a>] -&gt; <a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a> <a href="#v:treparcomCaixa" class="selflink">#</a></p><div class="doc"><p>Quando o jogador segura uma caixa, <code>treparcomCaixa</code> verifica se existe um bloco ou caixa na posi&#231;&#227;o 1 telha &#224; frente e 2 telhas a cima do jogador (imagine-se uma forma de <a href="L.html">L</a>) </p><p>Impede o jogador de trepar para espa&#231;os apertados em que o teto n&#227;o permite o transporte de uma caixa.</p><p>Depois valida a a&#231;&#227;o de trepar sem caixa, chamando a fun&#231;&#227;o <code>treparsemCaixa</code></p></div></div><div class="top"><p class="src"><a id="v:interagirCaixa" class="def">interagirCaixa</a> :: <a href="LI12122.html#t:Jogo" title="LI12122">Jogo</a> -&gt; <a href="LI12122.html#t:Movimento" title="LI12122">Movimento</a> -&gt; Bool <a href="#v:interagirCaixa" class="selflink">#</a></p><div class="doc"><p>Faz com que o jogador carregue/largue uma caixa (se poss&#237;vel)</p></div></div><div class="top"><p class="src"><a id="v:pegarCaixa" class="def">pegarCaixa</a> :: <a href="LI12122.html#t:Jogo" title="LI12122">Jogo</a> -&gt; [<a href="LI12122.html#t:Peca" title="LI12122">Peca</a>] -&gt; Bool <a href="#v:pegarCaixa" class="selflink">#</a></p><div class="doc"><p>Quando o jogador n&#227;o segura uma caixa, <code>pegarCaixa</code> testa a possiblidade de pegar numa caixa</p><p>Verifica simultaneamente se existe uma caixa na posi&#231;&#227;o &#224; frente do jogador e, caso haja, verifica se nenhuma caixa ou bloco se encontra por cima dela</p><p>Impede o jogador de pegar em caixas quando existem objetos em cima da caixa ou do jogador</p></div></div><div class="top"><p class="src"><a id="v:largarCaixa" class="def">largarCaixa</a> :: <a href="LI12122.html#t:Jogo" title="LI12122">Jogo</a> -&gt; <a href="LI12122.html#t:Jogo" title="LI12122">Jogo</a> <a href="#v:largarCaixa" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>